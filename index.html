<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bar CafeterÃ­a - Sistema de GestiÃ³n</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>â˜• Bar CafeterÃ­a Premium â˜•</h1>
            <p id="fecha"></p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="showTab('mesas')">ğŸª‘ Control de Mesas</button>
            <button class="tab-button" onclick="showTab('pedidos')">ğŸ“‹ Registro de Pedidos</button>
            <button class="tab-button" onclick="showTab('inventario')">ğŸ“¦ GestiÃ³n de Inventario</button>
            <button class="tab-button" onclick="showTab('facturacion')">ğŸ“Š FacturaciÃ³n</button>
            <button class="tab-button" onclick="showTab('configuracion')">âš™ï¸ ConfiguraciÃ³n</button>
        </div>

        <!-- Tab Mesas -->
        <div id="mesas" class="tab-content active">
            <h2>Control de Mesas</h2>
            <div class="mesas-grid" id="mesasGrid"></div>
        </div>

        <!-- Tab GestiÃ³n de Inventario -->
        <div id="inventario" class="tab-content">
            <h2>ğŸ“¦ GestiÃ³n de Inventario</h2>

            <!-- Resumen de Alertas -->
            <div id="alertasInventario" style="margin-bottom: 25px;"></div>

            <!-- Filtros y BÃºsqueda -->
            <div
                style="background: rgba(30, 30, 30, 0.9); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 25px;">
                <h3 style="color: #ffa502; margin-bottom: 15px;">ğŸ” Filtros y BÃºsqueda</h3>
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; align-items: end;">
                    <div>
                        <label style="display: block; margin-bottom: 5px; color: #888;">ğŸ” Buscar producto:</label>
                        <input type="text" id="buscarProducto" placeholder="Nombre del producto..."
                            oninput="filtrarInventario()"
                            style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; color: #888;">ğŸ“Š Estado del stock:</label>
                        <select id="filtroStock" onchange="filtrarInventario()"
                            style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                            <option value="todos">Todos los productos</option>
                            <option value="normal">Stock normal</option>
                            <option value="bajo">Stock bajo</option>
                            <option value="agotado">Sin stock</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; color: #888;">ğŸ¢ Ãrea:</label>
                        <select id="filtroArea" onchange="filtrarInventario()"
                            style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                            <!-- Se llenarÃ¡ dinÃ¡micamente -->
                        </select>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; color: #888;">ğŸ“‚ CategorÃ­a:</label>
                        <select id="filtroCategoria" onchange="filtrarInventario()"
                            style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                            <!-- Se llenarÃ¡ dinÃ¡micamente -->
                        </select>
                    </div>
                    <button class="btn-warning" onclick="limpiarFiltrosInventario()">ğŸ”„ Limpiar</button>
                </div>
            </div>

            <!-- Acciones RÃ¡pidas -->
            <div
                style="background: rgba(30, 30, 30, 0.9); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 25px;">
                <h3 style="color: #ffa502; margin-bottom: 15px;">âš¡ Acciones RÃ¡pidas</h3>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <button class="btn-success" onclick="abrirModalReabastecimiento()">ğŸ“ˆ Reabastecer Todo</button>
                    <button class="btn-warning" onclick="exportarInventarioCSV()">ğŸ“¥ Exportar Inventario</button>
                    <button class="btn-primary" onclick="mostrarHistorialMovimientos()">ğŸ“‹ Historial de
                        Movimientos</button>
                    <button class="btn-primary" onclick="abrirModalAjusteStock()">âš–ï¸ Ajuste Manual</button>
                </div>
            </div>

            <!-- Lista de Productos del Inventario -->
            <div
                style="background: rgba(30, 30, 30, 0.9); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1);">
                <h3 style="color: #ffa502; margin-bottom: 20px;">ğŸ“¦ Productos en Inventario</h3>
                <div id="listaInventario" style="max-height: 600px; overflow-y: auto;"></div>
            </div>
        </div>

        <!-- Tab FacturaciÃ³n -->
        <div id="facturacion" class="tab-content">
            <h2>Resumen de FacturaciÃ³n</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <h4>ğŸ’° Hoy</h4>
                    <div class="value" id="facturacionHoy">â‚¬0.00</div>
                </div>
                <div class="stat-card">
                    <h4>ğŸ“… Esta Semana</h4>
                    <div class="value" id="facturacionSemana">â‚¬0.00</div>
                </div>
                <div class="stat-card">
                    <h4>ğŸ“ˆ Este Mes</h4>
                    <div class="value" id="facturacionMes">â‚¬0.00</div>
                </div>
                <div class="stat-card">
                    <h4>ğŸ“Š <span id="nombreTrimestre">Este Trimestre</span></h4>
                    <div class="value" id="facturacionTrimestre">â‚¬0.00</div>
                </div>
            </div>

            <h3>ğŸ“Š Detalle Diario</h3>
            <table class="facturacion-table">
                <thead>
                    <tr>
                        <th>DÃ­a</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody id="facturacionDiaria"></tbody>
            </table>

            <h3>ğŸ“ˆ Resumen Semanal</h3>
            <table class="facturacion-table">
                <thead>
                    <tr>
                        <th>Semana</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody id="facturacionSemanal"></tbody>
            </table>
        </div>

        <!-- Tab ConfiguraciÃ³n -->
        <div id="configuracion" class="tab-content">
            <h2>ConfiguraciÃ³n del Sistema</h2>

            <div style="margin: 30px 0;">
                <h3>ğŸ“¦ GestiÃ³n de Productos</h3>
                <div
                    style="background: rgba(30, 30, 30, 0.9); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <h4 style="color: #ffa502; margin-bottom: 20px;">â• Agregar Nuevo Producto</h4>

                    <div style="display: flex; flex-direction: column; gap: 20px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                            <div>
                                <label style="display: block; margin-bottom: 5px; color: #888;">Nombre:</label>
                                <input type="text" id="nuevoNombre" placeholder="Nombre del producto"
                                    style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; color: #888;">Precio (â‚¬):</label>
                                <input type="number" id="nuevoPrecio" placeholder="0.00" step="0.10" min="0"
                                    style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; color: #888;">CategorÃ­a: <span
                                        style="color: #ff6b6b;">*</span></label>
                                <select id="nuevaCategoria"
                                    style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                                    <!-- Se llenarÃ¡ dinÃ¡micamente -->
                                </select>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr 150px 150px; gap: 15px;">
                            <div>
                                <label style="display: block; margin-bottom: 5px; color: #888;">Ãrea (opcional):</label>
                                <select id="nuevaArea"
                                    style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                                    <!-- Se llenarÃ¡ dinÃ¡micamente -->
                                </select>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; color: #888;">Visual del
                                    Producto:</label>
                                <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
                                    <button type="button" onclick="toggleSelectorVisual('emoji')" id="btnEmoji"
                                        style="padding: 8px 12px; background: #4a5568; border: none; border-radius: 5px; color: white; cursor: pointer;">ğŸ˜€
                                        Emoji</button>
                                    <button type="button" onclick="toggleSelectorVisual('imagen')" id="btnImagen"
                                        style="padding: 8px 12px; background: #2d3748; border: none; border-radius: 5px; color: white; cursor: pointer;">ğŸ–¼ï¸
                                        Imagen</button>
                                </div>

                                <div id="selectorEmoji" style="display: block;">
                                    <input type="text" id="nuevoEmoji" value="ğŸ½ï¸" readonly
                                        style="width: 80px; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; text-align: center;
                                                                                font-size: 24px; cursor: pointer; margin-bottom: 10px;">
                                    <div
                                        style="display: flex; flex-wrap: wrap; gap: 5px; padding: 10px; background: rgba(30, 30, 30, 0.9); border-radius: 8px; max-height: 100px; overflow-y: auto;">
                                        <span onclick="seleccionarEmoji('â˜•')"
                                            style="cursor: pointer; padding: 5px; font-size: 24px; border-radius: 5px; background: rgba(255,255,255,0.05);"
                                            title="CafÃ©">â˜•</span>
                                        <span onclick="seleccionarEmoji('ğŸ¥¤')"
                                            style="cursor: pointer; padding: 5px; font-size: 24px; border-radius: 5px; background: rgba(255,255,255,0.05);"
                                            title="Refresco">ğŸ¥¤</span>
                                        <span onclick="seleccionarEmoji('ğŸº')"
                                            style="cursor: pointer; padding: 5px; font-size: 24px; border-radius: 5px; background: rgba(255,255,255,0.05);"
                                            title="Cerveza">ğŸº</span>
                                        <span onclick="seleccionarEmoji('ğŸ·')"
                                            style="cursor: pointer; padding: 5px; font-size: 24px; border-radius: 5px; background: rgba(255,255,255,0.05);"
                                            title="Vino">ğŸ·</span>
                                        <span onclick="seleccionarEmoji('ğŸ¹')"
                                            style="cursor: pointer; padding: 5px; font-size: 24px; border-radius: 5px; background: rgba(255,255,255,0.05);"
                                            title="CÃ³ctel">ğŸ¹</span>
                                        <span onclick="seleccionarEmoji('ğŸ¥ƒ')"
                                            style="cursor: pointer; padding: 5px; font-size: 24px; border-radius: 5px; background: rgba(255,255,255,0.05);"
                                            title="Licor">ğŸ¥ƒ</span>
                                        <span onclick="seleccionarEmoji('ğŸ')"
                                            style="cursor: pointer; padding: 5px; font-size: 24px; border-radius: 5px; background: rgba(255,255,255,0.05);"
                                            title="Pan">ğŸ</span>
                                        <span onclick="seleccionarEmoji('ğŸ¥ª')"
                                            style="cursor: pointer; padding: 5px; font-size: 24px; border-radius: 5px; background: rgba(255,255,255,0.05);"
                                            title="Bocadillo">ğŸ¥ª</span>
                                        <span onclick="seleccionarEmoji('ğŸ”')"
                                            style="cursor: pointer; padding: 5px; font-size: 24px; border-radius: 5px; background: rgba(255,255,255,0.05);"
                                            title="Hamburguesa">ğŸ”</span>
                                        <span onclick="seleccionarEmoji('ğŸ•')"
                                            style="cursor: pointer; padding: 5px; font-size: 24px; border-radius: 5px; background: rgba(255,255,255,0.05);"
                                            title="Pizza">ğŸ•</span>
                                        <span onclick="seleccionarEmoji('ğŸ¥—')"
                                            style="cursor: pointer; padding: 5px; font-size: 24px; border-radius: 5px; background: rgba(255,255,255,0.05);"
                                            title="Ensalada">ğŸ¥—</span>
                                        <span onclick="seleccionarEmoji('ğŸ°')"
                                            style="cursor: pointer; padding: 5px; font-size: 24px; border-radius: 5px; background: rgba(255,255,255,0.05);"
                                            title="Postre">ğŸ°</span>
                                    </div>
                                </div>

                                <div id="selectorImagen" style="display: none;">
                                    <input type="file" id="nuevoImagenFile" accept="image/*"
                                        onchange="previewImagen(event)" style="display: none;">
                                    <button type="button" onclick="document.getElementById('nuevoImagenFile').click()"
                                        style="padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; cursor: pointer;">
                                        ğŸ“· Seleccionar Imagen
                                    </button>
                                    <div id="previewImagenContainer" style="margin-top: 10px;">
                                        <img id="previewImagen" src="" alt="Preview"
                                            style="max-width: 80px; max-height: 80px; border-radius: 8px; display: none;">
                                    </div>
                                    <input type="hidden" id="nuevoImagen" value="">
                                </div>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; color: #888;">Stock:</label>
                                <input type="number" id="nuevoStock" placeholder="50" min="0"
                                    style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; color: #888;">Stock MÃ­nimo:</label>
                                <input type="number" id="nuevoStockMinimo" placeholder="10" min="0"
                                    style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                            </div>
                        </div>

                        <div style="text-align: center;">
                            <button class="btn-success" onclick="agregarNuevoProducto()" style="padding: 12px 30px;">â•
                                Agregar Producto</button>
                        </div>
                    </div>

                    <div style="margin-top: 20px;">
                        <h4 style="color: #ffa502; margin-bottom: 15px;">ğŸ“‹ Productos Actuales</h4>
                        <div id="listaProductos"
                            style="max-height: 400px; overflow-y: auto; background: rgba(30, 30, 30, 0.9); border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1);">
                        </div>
                    </div>
                </div>
            </div>

            <div style="margin: 30px 0;">
                <h3>ğŸª‘ GestiÃ³n de Mesas</h3>
                <div
                    style="background: rgba(30, 30, 30, 0.9); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h4 style="color: #ffa502; margin: 0;">ğŸ“‹ Mesas Actuales</h4>
                        <button class="btn-success" onclick="abrirModalCrearMesa()">â• Agregar Mesa</button>
                    </div>
                    <div id="listaMesas"
                        style="max-height: 300px; overflow-y: auto; border-radius: 10px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    </div>
                </div>
            </div>

            <!-- GestiÃ³n de CategorÃ­as -->
            <div style="margin: 30px 0;">
                <h3>ğŸ·ï¸ GestiÃ³n de CategorÃ­as</h3>
                <div
                    style="background: rgba(30, 30, 30, 0.9); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1);">

                    <!-- Agregar nueva categorÃ­a -->
                    <div style="display: flex; gap: 15px; align-items: end; margin-bottom: 20px;">
                        <div style="flex: 1;">
                            <label style="display: block; margin-bottom: 5px; color: #888;">Nueva CategorÃ­a:</label>
                            <input type="text" id="nuevaCategoriaNombre" placeholder="Nombre de la categorÃ­a"
                                style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                        </div>
                        <button class="btn-success" onclick="agregarCategoria()">â• Agregar</button>
                    </div>

                    <!-- Lista de categorÃ­as -->
                    <div id="listaCategorias" style="max-height: 200px; overflow-y: auto;">
                        <!-- Las categorÃ­as se cargarÃ¡n aquÃ­ dinÃ¡micamente -->
                    </div>
                </div>
            </div>

            <!-- GestiÃ³n de Ãreas -->
            <div style="margin: 30px 0;">
                <h3>ğŸ¢ GestiÃ³n de Ãreas</h3>
                <div
                    style="background: rgba(30, 30, 30, 0.9); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1);">

                    <!-- Agregar nueva Ã¡rea -->
                    <div style="display: flex; gap: 15px; align-items: end; margin-bottom: 20px;">
                        <div style="flex: 1;">
                            <label style="display: block; margin-bottom: 5px; color: #888;">Nueva Ãrea:</label>
                            <input type="text" id="nuevaAreaNombre" placeholder="Nombre del Ã¡rea (ej: Terraza JardÃ­n)"
                                style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                        </div>
                        <button class="btn-success" onclick="agregarArea()">â• Agregar</button>
                    </div>

                    <!-- Lista de Ã¡reas -->
                    <div id="listaAreas" style="max-height: 200px; overflow-y: auto;">
                        <!-- Las Ã¡reas se cargarÃ¡n aquÃ­ dinÃ¡micamente -->
                    </div>
                </div>
            </div>

            <div style="margin: 30px 0;">
                <h3>ğŸ’¾ GestiÃ³n de Datos</h3>
                <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 20px;">
                    <button class="btn-success" onclick="exportarDatos()">ğŸ“¥ Exportar Datos</button>
                    <button class="btn-warning" onclick="document.getElementById('importFile').click()">ğŸ“¤ Importar
                        Datos</button>
                    <input type="file" id="importFile" style="display: none;" onchange="importarDatos(event)">
                    <button class="btn-danger"
                        onclick="if(confirm('Â¿EstÃ¡s seguro? Esto borrarÃ¡ todos los datos.')) limpiarTodo()">ğŸ—‘ï¸ Limpiar
                        Todo</button>
                </div>
            </div>

            <div style="margin: 30px 0;">
                <h3>ğŸ”„ Backup AutomÃ¡tico</h3>
                <div
                    style="background: rgba(30, 30, 30, 0.9); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <p style="margin-bottom: 10px;">âœ… Los datos se guardan automÃ¡ticamente en tu navegador.</p>
                    <p>â° Ãšltima actualizaciÃ³n: <strong><span id="ultimaActualizacion">-</span></strong></p>
                </div>
            </div>

            <div style="margin: 30px 0;">
                <h3>âŒ¨ï¸ ConfiguraciÃ³n de Teclado</h3>
                <div
                    style="background: rgba(30, 30, 30, 0.9); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                        <div>
                            <h4 style="color: #ffa502; margin-bottom: 5px;">Teclado TÃ¡ctil Virtual</h4>
                            <p style="color: #888; font-size: 0.9em; margin: 0;">
                                Activa esta opciÃ³n para usar un teclado en pantalla en dispositivos tÃ¡ctiles.
                                Ideal para tablets y TPV tÃ¡ctiles.
                            </p>
                        </div>
                        <label class="switch" style="margin-left: 20px;">
                            <input type="checkbox" id="toggleTecladoVirtual" onchange="toggleTecladoVirtual()">
                            <span class="slider"></span>
                        </label>
                    </div>

                    <div id="estadoTecladoVirtual"
                        style="padding: 10px; background: rgba(40, 40, 40, 0.5); border-radius: 8px; text-align: center;">
                        <span id="textoEstadoTeclado">ğŸ”´ Teclado Virtual Desactivado</span>
                    </div>
                    <div
                        style="margin-top: 15px; padding: 15px; background: rgba(255, 165, 2, 0.1); border: 1px solid rgba(255, 165, 2, 0.3); border-radius: 8px;">
                        <p style="color: #ffa502; margin: 0; font-size: 0.85em;">
                            <strong>ğŸ’¡ Tip:</strong> Si usas un dispositivo con teclado fÃ­sico, mantÃ©n esta opciÃ³n
                            desactivada.
                            Si usas una tablet o pantalla tÃ¡ctil, actÃ­vala para facilitar la entrada de datos.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Panel de Desarrollo (Solo para pruebas) -->
            <div style="margin: 30px 0;" id="panelDesarrollo">
                <h3>ğŸ”§ Panel de Desarrollo</h3>
                <div
                    style="background: rgba(255, 0, 0, 0.1); border: 2px dashed rgba(255, 0, 0, 0.3); padding: 20px; border-radius: 15px;">
                    <p style="color: #ff6b6b; margin-bottom: 15px;">âš ï¸ <strong>SOLO PARA DESARROLLO</strong> - Eliminar
                        en producciÃ³n</p>

                    <div style="display: grid; gap: 15px;">
                        <div>
                            <h4 style="color: #ffa502; margin-bottom: 10px;">ğŸ“Š Estado Actual</h4>
                            <div id="estadoLicenciaDev"
                                style="background: rgba(40, 40, 40, 0.5); padding: 15px; border-radius: 10px;">
                                <!-- Se llenarÃ¡ dinÃ¡micamente -->
                            </div>
                        </div>

                        <div>
                            <h4 style="color: #ffa502; margin-bottom: 10px;">ğŸ”‘ Generar Licencias de Prueba</h4>
                            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                <button onclick="generarLicenciaDev('standard')" class="btn-primary">
                                    Generar Standard
                                </button>
                                <button onclick="generarLicenciaDev('pro')" class="btn-warning">
                                    Generar Pro
                                </button>
                                <button onclick="generarLicenciaDev('premium')" class="btn-success">
                                    Generar Premium
                                </button>
                            </div>
                        </div>
                        <div id="licenciaGenerada"
                            style="margin-top: 10px; padding: 10px; background: rgba(40, 40, 40, 0.5); border-radius: 8px; font-family: monospace; display: none;">
                            <!-- AquÃ­ se mostrarÃ¡ la licencia generada -->
                        </div>
                    </div>

                    <div>
                        <h4 style="color: #ffa502; margin-bottom: 10px;">ğŸ—‘ï¸ Limpiar Datos de Licencia</h4>
                        <button onclick="limpiarLicenciaDev()" class="btn-danger">
                            Resetear Todo
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab Pedidos -->
        <div id="pedidos" class="tab-content">
            <h2>ğŸ“‹ Registro de Pedidos por Hora</h2>

            <!-- Filtros -->
            <div
                style="background: rgba(30, 30, 30, 0.9); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 25px;">
                <h3 style="color: #ffa502; margin-bottom: 15px;">ğŸ” Filtros</h3>
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; align-items: end;">
                    <div>
                        <label style="display: block; margin-bottom: 5px; color: #888;">ğŸ“… Fecha:</label>
                        <input type="date" id="filtroFecha"
                            style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; color: #888;">ğŸª‘ Mesa:</label>
                        <select id="filtroMesa"
                            style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                            <option value="">Todas las mesas</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; color: #888;">â° Hora desde:</label>
                        <input type="time" id="filtroHoraDesde"
                            style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; color: #888;">â° Hora hasta:</label>
                        <input type="time" id="filtroHoraHasta"
                            style="width: 100%; padding: 10px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                    </div>
                    <button class="btn-primary" onclick="aplicarFiltrosPedidos()">ğŸ” Filtrar</button>
                    <button class="btn-warning" onclick="limpiarFiltrosPedidos()">ğŸ”„ Limpiar</button>
                </div>
            </div>

            <!-- Panel de BÃºsqueda Avanzada (Premium) -->
            <div id="panelBusquedaAvanzada"></div>

            <!-- EstadÃ­sticas por hora -->
            <div
                style="background: rgba(30, 30, 30, 0.9); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 25px;">
                <h3 style="color: #ffa502; margin-bottom: 15px;">ğŸ“Š Resumen por Hora</h3>
                <div id="estadisticasHora"
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                </div>
            </div>

            <!-- Lista de pedidos -->
            <div
                style="background: rgba(30, 30, 30, 0.9); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 style="color: #ffa502; margin: 0;">ğŸ“ Pedidos Detallados</h3>
                    <button class="btn-success" onclick="exportarPedidosCSV()">ğŸ“¥ Exportar CSV</button>
                </div>
                <div id="listaPedidos" style="max-height: 500px; overflow-y: auto;"></div>
            </div>
        </div>

    </div>

    <!-- MODALES -->

    <!-- Modal para crear/editar mesa -->
    <div id="gestionMesaModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close" onclick="cerrarModalGestionMesa()">&times;</span>
            <h2 id="tituloModalMesa" style="margin-bottom: 25px; color: #fff;">ğŸª‘ Crear Mesa</h2>

            <div style="display: grid; gap: 20px;">
                <div>
                    <label style="display: block; margin-bottom: 5px; color: #888;">Nombre/NÃºmero:</label>
                    <input type="text" id="gestionMesaNombre" placeholder="Ej: Mesa 1, VIP, Terraza A..."
                        style="width: 100%; padding: 12px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 5px; color: #888;">Capacidad:</label>
                    <input type="number" id="gestionMesaCapacidad" placeholder="4" min="1" max="20"
                        style="width: 100%; padding: 12px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 5px; color: #888;">DescripciÃ³n (opcional):</label>
                    <textarea id="gestionMesaDescripcion" placeholder="Ej: Mesa junto a la ventana, Mesa VIP..."
                        style="width: 100%; padding: 12px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px; min-height: 80px; resize: vertical;"></textarea>
                </div>
            </div>

            <div style="margin-top: 30px; text-align: center;">
                <button class="btn-success" onclick="guardarGestionMesa()">ğŸ’¾ Guardar</button>
                <button class="btn-primary" onclick="cerrarModalGestionMesa()">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal para gestionar mesa -->
    <div id="mesaModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModal()">&times;</span>
            <h2 id="mesaTitulo" style="margin-bottom: 25px; color: #fff;">Mesa</h2>

            <h3 style="margin-bottom: 20px;">ğŸ½ï¸ Selecciona Productos</h3>
            <div class="productos-grid" id="productosGrid"></div>

            <div class="ticket" id="ticketActual">
                <h3>ğŸ§¾ Ticket Actual</h3>
                <div id="ticketItems"></div>
                <div class="total" id="totalMesa">Total: â‚¬0.00</div>
            </div>

            <div style="margin-top: 30px; text-align: center;">
                <button class="btn-success" onclick="cobrarMesa()">ğŸ’° Cobrar Mesa</button>
                <button class="btn-danger" onclick="limpiarMesa()">ğŸ—‘ï¸ Limpiar Mesa</button>
                <button class="btn-primary" onclick="cerrarModal()">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Modal para editar producto -->
    <div id="editarProductoModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close" onclick="cerrarModalEditarProducto()">&times;</span>
            <h2 style="margin-bottom: 25px; color: #fff;">âœï¸ Editar Producto</h2>

            <div style="display: grid; gap: 20px;">
                <div>
                    <label style="display: block; margin-bottom: 5px; color: #888;">Nombre:</label>
                    <input type="text" id="editarNombre" placeholder="Nombre del producto"
                        style="width: 100%; padding: 12px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 5px; color: #888;">Precio (â‚¬):</label>
                    <input type="number" id="editarPrecio" placeholder="0.00" step="0.10" min="0"
                        style="width: 100%; padding: 12px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 5px; color: #888;">Emoji:</label>
                    <input type="text" id="editarEmoji" placeholder="ğŸ½ï¸" maxlength="2"
                        style="width: 100%; padding: 12px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px; text-align: center;">
                </div>
            </div>

            <div style="margin-top: 30px; text-align: center;">
                <button class="btn-success" onclick="guardarEdicionProducto()">ğŸ’¾ Guardar Cambios</button>
                <button class="btn-primary" onclick="cerrarModalEditarProducto()">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal para Ajuste de Stock Individual -->
    <div id="modalAjusteStock" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close" onclick="cerrarModalAjusteStock()">&times;</span>
            <h2 id="tituloAjusteStock" style="margin-bottom: 25px; color: #fff;">ğŸ“¦ Ajustar Stock</h2>

            <div id="infoProductoAjuste"
                style="background: rgba(255, 107, 107, 0.1); border: 1px solid rgba(255, 107, 107, 0.3); padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center;">
                <h3 id="nombreProductoAjuste" style="color: #fff; margin: 0;"></h3>
                <p id="stockActualAjuste"
                    style="color: #ffa502; margin: 5px 0 0 0; font-size: 1.2em; font-weight: bold;"></p>
            </div>

            <div style="display: grid; gap: 20px;">
                <div>
                    <label style="display: block; margin-bottom: 5px; color: #888;">ğŸ“Š Tipo de ajuste:</label>
                    <select id="tipoAjuste" onchange="toggleCamposAjuste()"
                        style="width: 100%; padding: 12px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                        <option value="establecer">ğŸ“Œ Establecer cantidad exacta</option>
                        <option value="agregar">â• Agregar al stock actual</option>
                        <option value="reducir">â– Reducir del stock actual</option>
                    </select>
                </div>

                <div>
                    <label id="labelCantidad" style="display: block; margin-bottom: 5px; color: #888;">ğŸ“¦ Nueva
                        cantidad:</label>
                    <input type="number" id="cantidadAjuste" placeholder="0" min="0"
                        style="width: 100%; padding: 12px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                </div>

                <div>
                    <label style="display: block; margin-bottom: 5px; color: #888;">ğŸ“ Motivo (opcional):</label>
                    <textarea id="motivoAjuste" placeholder="Ej: Rotura, Caducidad, Inventario fÃ­sico..."
                        style="width: 100%; padding: 12px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px; min-height: 80px; resize: vertical;"></textarea>
                </div>

                <div id="previsualizacionAjuste"
                    style="background: rgba(30, 30, 30, 0.9); padding: 15px; border-radius: 10px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <h4 style="color: #ffa502; margin-bottom: 10px;">ğŸ‘ï¸ PrevisualizaciÃ³n:</h4>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: #888;">Stock actual:</span>
                        <span id="stockPrevioAjuste" style="color: #fff;">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                        <span style="color: #888;">Stock resultante:</span>
                        <span id="stockResultanteAjuste" style="color: #22c55e; font-weight: bold;">0</span>
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px; text-align: center;">
                <button class="btn-success" onclick="confirmarAjusteStock()">ğŸ’¾ Confirmar Ajuste</button>
                <button class="btn-primary" onclick="cerrarModalAjusteStock()">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal para Reabastecimiento Masivo -->
    <div id="modalReabastecimiento" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close" onclick="cerrarModalReabastecimiento()">&times;</span>
            <h2 style="margin-bottom: 25px; color: #fff;">ğŸ“ˆ Reabastecimiento Masivo</h2>

            <div
                style="background: rgba(255, 107, 107, 0.1); border: 1px solid rgba(255, 107, 107, 0.3); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                <h4 style="color: #ffa502; margin-bottom: 10px;">â„¹ï¸ InformaciÃ³n</h4>
                <p style="color: #e0e0e0; margin: 0;">Esta acciÃ³n reabastecerÃ¡ todos los productos que estÃ©n por
                    debajo
                    de su stock mÃ­nimo hasta alcanzar una cantidad objetivo.</p>
            </div>

            <div style="display: grid; gap: 20px;">
                <div>
                    <label style="display: block; margin-bottom: 5px; color: #888;">ğŸ¯ Cantidad objetivo:</label>
                    <input type="number" id="cantidadObjetivo" placeholder="50" min="1" value="50"
                        style="width: 100%; padding: 12px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                    <small style="color: #888;">Se establecerÃ¡ esta cantidad para todos los productos con stock
                        bajo</small>
                </div>

                <div>
                    <label style="display: block; margin-bottom: 5px; color: #888;">ğŸ“ Motivo:</label>
                    <input type="text" id="motivoReabastecimiento"
                        placeholder="Ej: ReposiciÃ³n semanal, Pedido a proveedor..." value="Reabastecimiento automÃ¡tico"
                        style="width: 100%; padding: 12px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                </div>

                <div id="productosAReabastecer"
                    style="background: rgba(30, 30, 30, 0.9); padding: 15px; border-radius: 10px; border: 1px solid rgba(255, 255, 255, 0.1); max-height: 200px; overflow-y: auto;">
                    <h4 style="color: #ffa502; margin-bottom: 10px;">ğŸ“¦ Productos a reabastecer:</h4>
                    <div id="listaReabastecimiento"></div>
                </div>
            </div>

            <div style="margin-top: 30px; text-align: center;">
                <button class="btn-success" onclick="confirmarReabastecimiento()">ğŸ“ˆ Confirmar
                    Reabastecimiento</button>
                <button class="btn-primary" onclick="cerrarModalReabastecimiento()">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal para Cobro con Cambio -->
    <div id="modalCobro" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close" onclick="cerrarModalCobro()">&times;</span>
            <h2 style="margin-bottom: 25px; color: #fff; text-align: center;">ğŸ’° Procesar Cobro</h2>

            <div style="text-align: center; margin-bottom: 30px;">
                <div
                    style="background: rgba(255, 107, 107, 0.2); border: 1px solid rgba(255, 107, 107, 0.5); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h3 style="color: #ffa502; margin: 0;">Total a Cobrar</h3>
                    <div id="totalACobrar" style="font-size: 2.5em; font-weight: bold; color: #fff; margin-top: 10px;">
                        â‚¬0.00</div>
                </div>
            </div>

            <div style="display: grid; gap: 20px;">
                <div>
                    <label style="display: block; margin-bottom: 5px; color: #888; font-weight: 600;">ğŸ’³ MÃ©todo de
                        Pago:</label>
                    <select id="metodoPago" onchange="toggleCantidadRecibida()"
                        style="width: 100%; padding: 12px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                        <option value="efectivo">ğŸ’µ Efectivo</option>
                        <option value="tarjeta">ğŸ’³ Tarjeta</option>
                        <option value="bizum">ğŸ“± Bizum</option>
                        <option value="transferencia">ğŸ¦ Transferencia</option>
                    </select>
                </div>

                <div id="seccionEfectivo">
                    <label style="display: block; margin-bottom: 5px; color: #888; font-weight: 600;">ğŸ’µ Cantidad
                        Recibida:</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="number" id="cantidadRecibida" placeholder="0.00" step="0.01" min="0"
                            oninput="calcularCambio()"
                            style="flex: 1; padding: 12px; background: rgba(40, 40, 40, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                        <button type="button" onclick="establecerImporteExacto()"
                            style="background: #4a5568; color: white; border: none; padding: 12px 15px; border-radius: 8px; cursor: pointer; font-size: 14px; white-space: nowrap;">
                            Exacto
                        </button>
                    </div>
                </div>

                <div id="seccionCambio"
                    style="background: rgba(30, 30, 30, 0.9); padding: 15px; border-radius: 10px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="color: #888; font-weight: 600;">ğŸ’° Cambio:</span>
                        <span id="cambioCalculado"
                            style="font-size: 1.5em; font-weight: bold; color: #22c55e;">â‚¬0.00</span>
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px; text-align: center; display: flex; gap: 15px; justify-content: center;">
                <button id="confirmarCobroBtn" class="btn-success" onclick="confirmarCobro()" disabled
                    style="opacity: 0.5; padding: 15px 30px; font-size: 16px; font-weight: bold;">
                    âœ… Confirmar Cobro
                </button>
                <button class="btn-primary" onclick="cerrarModalCobro()" style="padding: 15px 30px; font-size: 16px;">
                    âŒ Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Teclado NumÃ©rico Virtual -->
    <div id="tecladoNumerico" class="teclado-numerico" style="display: none;">
        <div class="teclado-container">
            <div class="teclado-display">
                <input type="text" id="tecladoInput" readonly>
            </div>
            <div class="teclado-grid">
                <button class="tecla-num" onclick="agregarNumero('7')">7</button>
                <button class="tecla-num" onclick="agregarNumero('8')">8</button>
                <button class="tecla-num" onclick="agregarNumero('9')">9</button>
                <button class="tecla-func tecla-borrar" onclick="borrarUltimo()">âŒ«</button>

                <button class="tecla-num" onclick="agregarNumero('4')">4</button>
                <button class="tecla-num" onclick="agregarNumero('5')">5</button>
                <button class="tecla-num" onclick="agregarNumero('6')">6</button>
                <button class="tecla-func tecla-limpiar" onclick="limpiarTeclado()">C</button>

                <button class="tecla-num" onclick="agregarNumero('1')">1</button>
                <button class="tecla-num" onclick="agregarNumero('2')">2</button>
                <button class="tecla-num" onclick="agregarNumero('3')">3</button>
                <button class="tecla-func tecla-decimal" onclick="agregarDecimal()">.</button>

                <button class="tecla-num tecla-cero" onclick="agregarNumero('0')">0</button>
                <button class="tecla-num" onclick="agregarNumero('00')">00</button>
                <button class="tecla-func tecla-ok" onclick="confirmarTeclado()">âœ“</button>
            </div>
            <button class="tecla-cerrar" onclick="cerrarTeclado()">âœ• Cerrar</button>
        </div>
    </div>

    <!-- Teclado Completo Virtual -->
    <div id="tecladoCompleto" class="teclado-completo" style="display: none;">
        <div class="teclado-container">
            <div class="teclado-display">
                <input type="text" id="tecladoCompletoInput" readonly>
            </div>
            <div class="teclado-grid-completo">
                <!-- Primera fila -->
                <button class="tecla" onclick="agregarLetra('1')">1</button>
                <button class="tecla" onclick="agregarLetra('2')">2</button>
                <button class="tecla" onclick="agregarLetra('3')">3</button>
                <button class="tecla" onclick="agregarLetra('4')">4</button>
                <button class="tecla" onclick="agregarLetra('5')">5</button>
                <button class="tecla" onclick="agregarLetra('6')">6</button>
                <button class="tecla" onclick="agregarLetra('7')">7</button>
                <button class="tecla" onclick="agregarLetra('8')">8</button>
                <button class="tecla" onclick="agregarLetra('9')">9</button>
                <button class="tecla" onclick="agregarLetra('0')">0</button>
                <button class="tecla tecla-func" onclick="borrarUltimoCompleto()">âŒ«</button>

                <!-- Segunda fila -->
                <button class="tecla" onclick="agregarLetra('Q')">Q</button>
                <button class="tecla" onclick="agregarLetra('W')">W</button>
                <button class="tecla" onclick="agregarLetra('E')">E</button>
                <button class="tecla" onclick="agregarLetra('R')">R</button>
                <button class="tecla" onclick="agregarLetra('T')">T</button>
                <button class="tecla" onclick="agregarLetra('Y')">Y</button>
                <button class="tecla" onclick="agregarLetra('U')">U</button>
                <button class="tecla" onclick="agregarLetra('I')">I</button>
                <button class="tecla" onclick="agregarLetra('O')">O</button>
                <button class="tecla" onclick="agregarLetra('P')">P</button>
                <button class="tecla tecla-func" onclick="limpiarTecladoCompleto()">CLR</button>

                <!-- Tercera fila -->
                <button class="tecla" onclick="agregarLetra('A')">A</button>
                <button class="tecla" onclick="agregarLetra('S')">S</button>
                <button class="tecla" onclick="agregarLetra('D')">D</button>
                <button class="tecla" onclick="agregarLetra('F')">F</button>
                <button class="tecla" onclick="agregarLetra('G')">G</button>
                <button class="tecla" onclick="agregarLetra('H')">H</button>
                <button class="tecla" onclick="agregarLetra('J')">J</button>
                <button class="tecla" onclick="agregarLetra('K')">K</button>
                <button class="tecla" onclick="agregarLetra('L')">L</button>
                <button class="tecla" onclick="agregarLetra('Ã‘')">Ã‘</button>
                <button class="tecla tecla-espacio-pequeno" onclick="agregarLetra(' ')">â£</button>

                <!-- Cuarta fila -->
                <button class="tecla" onclick="agregarLetra('Z')">Z</button>
                <button class="tecla" onclick="agregarLetra('X')">X</button>
                <button class="tecla" onclick="agregarLetra('C')">C</button>
                <button class="tecla" onclick="agregarLetra('V')">V</button>
                <button class="tecla" onclick="agregarLetra('B')">B</button>
                <button class="tecla" onclick="agregarLetra('N')">N</button>
                <button class="tecla" onclick="agregarLetra('M')">M</button>
                <button class="tecla" onclick="agregarLetra('.')">.</button>
                <button class="tecla" onclick="agregarLetra(',')">,</button>
                <button class="tecla tecla-func tecla-ok" onclick="confirmarTecladoCompleto()">âœ“</button>
            </div>
            <div class="teclado-fila-inferior">
                <button class="tecla-espacio" onclick="agregarLetra(' ')">ESPACIO</button>
                <button class="tecla-cerrar" onclick="cerrarTecladoCompleto()">âœ• Cerrar</button>
            </div>
        </div>
    </div>

    <script src="DatabaseManager.js"></script>
    <script src="script.js"></script>

    <!-- Modal Premium -->
    <div id="modalPremium" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <span class="close" onclick="cerrarModalPremium()">&times;</span>
            <h2
                style="background: linear-gradient(135deg, #ff6b6b 0%, #ffa502 50%, #ffd700 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-align: center; margin-bottom: 30px; font-size: 2.5em;">
                âš¡ Potencia tu Negocio
            </h2>

            <!-- Planes de precios -->
            <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 30px;">

                <!-- Plan Standard -->
                <div
                    style="background: rgba(40, 40, 40, 0.9); padding: 25px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1); position: relative;">
                    <h3 style="color: #888; text-align: center; margin-bottom: 10px;">Standard</h3>
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 3em; font-weight: bold; color: #4a5568;">49â‚¬</div>
                        <div style="color: #888;">al mes</div>
                        <div style="color: #666; font-size: 0.9em; margin-top: 5px;">
                            <s style="opacity: 0.7;">Gratis</s> â†’ Con soporte
                        </div>
                    </div>
                    <ul style="list-style: none; padding: 0; margin: 20px 0;">
                        <li style="padding: 8px 0; color: #e0e0e0;">âœ… Control de mesas completo</li>
                        <li style="padding: 8px 0; color: #e0e0e0;">âœ… GestiÃ³n de productos</li>
                        <li style="padding: 8px 0; color: #e0e0e0;">âœ… FacturaciÃ³n completa</li>
                        <li style="padding: 8px 0; color: #e0e0e0;">âœ… Inventario completo</li>
                        <li style="padding: 8px 0; color: #e0e0e0;">âœ… ExportaciÃ³n de datos</li>
                        <li style="padding: 8px 0; color: #e0e0e0;">âœ… Soporte tÃ©cnico</li>
                        <li style="padding: 8px 0; color: #888;">âœ— Sin anÃ¡lisis avanzado</li>
                        <li style="padding: 8px 0; color: #888;">âœ— Sin grÃ¡ficos</li>
                    </ul>
                    <button class="btn-primary" onclick="seleccionarPlan('standard')" style="width: 100%;">
                        Activar Standard
                    </button>
                </div>

                <!-- Plan Pro - MÃS POPULAR -->
                <div
                    style="background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(255, 165, 2, 0.1)); padding: 25px; border-radius: 15px; border: 2px solid #ffa502; position: relative; transform: scale(1.05); box-shadow: 0 10px 30px rgba(255, 165, 2, 0.3);">
                    <div
                        style="position: absolute; top: -15px; left: 50%; transform: translateX(-50%); background: #ffa502; color: white; padding: 5px 20px; border-radius: 20px; font-weight: bold; font-size: 0.9em;">
                        ğŸ”¥ MÃS POPULAR
                    </div>
                    <h3 style="color: #ffa502; text-align: center; margin-bottom: 10px; margin-top: 10px;">Pro</h3>
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 3em; font-weight: bold; color: #ffa502;">69â‚¬</div>
                        <div style="color: #888;">al mes</div>
                        <div style="color: #22c55e; font-size: 0.9em; margin-top: 5px;">
                            ğŸ’° Ahorra 468â‚¬/aÃ±o vs. competencia
                        </div>
                    </div>
                    <ul style="list-style: none; padding: 0; margin: 20px 0;">
                        <li style="padding: 8px 0; color: #fff;">âœ… <strong>Todo de Standard +</strong></li>
                        <li style="padding: 8px 0; color: #fff;">âœ… <strong>AnÃ¡lisis de ventas diarias</strong></li>
                        <li style="padding: 8px 0; color: #fff;">âœ… <strong>GrÃ¡ficos bÃ¡sicos</strong></li>
                        <li style="padding: 8px 0; color: #fff;">âœ… <strong>Filtros por categorÃ­a</strong></li>
                        <li style="padding: 8px 0; color: #fff;">âœ… <strong>ExportaciÃ³n CSV mejorada</strong></li>
                        <li style="padding: 8px 0; color: #fff;">âœ… <strong>Historial 90 dÃ­as</strong></li>
                        <li style="padding: 8px 0; color: #fff;">âœ… <strong>Soporte prioritario</strong></li>
                    </ul>
                    <button class="btn-warning" onclick="seleccionarPlan('pro')"
                        style="width: 100%; padding: 15px; font-size: 16px; font-weight: bold; animation: pulse 2s infinite;">
                        ğŸš€ Elegir Pro
                    </button>
                </div>

                <!-- Plan Premium -->
                <div
                    style="background: rgba(30, 30, 30, 0.9); padding: 25px; border-radius: 15px; border: 1px solid rgba(255, 215, 0, 0.3); position: relative;">
                    <div
                        style="position: absolute; top: -15px; right: 20px; background: linear-gradient(135deg, #ffd700, #ffed4e); color: #000; padding: 5px 15px; border-radius: 20px; font-weight: bold; font-size: 0.8em;">
                        â­ Ã‰LITE
                    </div>
                    <h3
                        style="background: linear-gradient(135deg, #ffd700, #ffed4e); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-align: center; margin-bottom: 10px;">
                        Premium</h3>
                    <div style="text-align: center; margin: 20px 0;">
                        <div
                            style="font-size: 3em; font-weight: bold; background: linear-gradient(135deg, #ffd700, #ffed4e); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                            130â‚¬</div>
                        <div style="color: #888;">al mes</div>
                        <div style="color: #ffd700; font-size: 0.9em; margin-top: 5px;">
                            ğŸ‘‘ La suite completa
                        </div>
                    </div>
                    <ul style="list-style: none; padding: 0; margin: 20px 0;">
                        <li style="padding: 8px 0; color: #ffd700;">â˜… <strong>Todo de Pro +</strong></li>
                        <li style="padding: 8px 0; color: #e0e0e0;">â˜… AnÃ¡lisis predictivo IA</li>
                        <li style="padding: 8px 0; color: #e0e0e0;">â˜… GrÃ¡ficos interactivos ilimitados</li>
                        <li style="padding: 8px 0; color: #e0e0e0;">â˜… Dashboard personalizable</li>
                        <li style="padding: 8px 0; color: #e0e0e0;">â˜… API para integraciones</li>
                        <li style="padding: 8px 0; color: #e0e0e0;">â˜… Multi-sucursal</li>
                        <li style="padding: 8px 0; color: #e0e0e0;">â˜… Soporte 24/7 dedicado</li>
                        <li style="padding: 8px 0; color: #e0e0e0;">â˜… FormaciÃ³n personalizada</li>
                    </ul>
                    <button class="btn-success" onclick="seleccionarPlan('premium')"
                        style="width: 100%; background: linear-gradient(135deg, #ffd700, #ffed4e); color: #000; border: none;">
                        ğŸ‘‘ Elegir Premium
                    </button>
                </div>
            </div>

            <!-- GarantÃ­as -->
            <div style="text-align: center; margin: 30px 0;">
                <div style="display: flex; justify-content: center; gap: 30px; flex-wrap: wrap;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 2em;">ğŸ”’</span>
                        <span>Pago 100% Seguro</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 2em;">ğŸ’°</span>
                        <span>30 dÃ­as de garantÃ­a</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 2em;">ğŸš«</span>
                        <span>Cancela cuando quieras</span>
                    </div>
                </div>
            </div>

            <!-- Formulario de activaciÃ³n (oculto por defecto) -->
            <div id="formularioActivacion" style="display: none; margin-top: 30px;">
                <!-- AquÃ­ irÃ¡ el formulario cuando seleccionen un plan -->
            </div>

            <!-- Opciones -->
            <div id="opcionesPremium">

                <div style="text-align: center; margin: 20px 0;">
                    <span style="color: #888;">â€” O â€”</span>
                </div>

                <div style="background: rgba(40, 40, 40, 0.9); padding: 20px; border-radius: 10px;">
                    <h4 style="color: #ffa502; margin-bottom: 15px;">ğŸ”‘ Â¿Ya tienes una licencia?</h4>
                    <input type="text" id="licenciaInput" placeholder="PREM-XXXX-XXXX-XXXX"
                        style="width: 100%; padding: 12px; background: rgba(30, 30, 30, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; margin-bottom: 10px; font-family: monospace; text-align: center;">
                    <button class="btn-primary" onclick="validarLicencia()" style="width: 100%;">
                        Activar Licencia
                    </button>
                </div>
            </div>

            <!-- Mensaje de Ã©xito (oculto por defecto) -->
            <div id="mensajeExito"
                style="display: none; background: rgba(34, 197, 94, 0.2); border: 1px solid #22c55e; padding: 20px; border-radius: 10px; text-align: center;">
                <h3 style="color: #22c55e; margin-bottom: 10px;">âœ… Â¡ActivaciÃ³n Exitosa!</h3>
                <p id="mensajeExitoTexto">Tu versiÃ³n premium estÃ¡ activa.</p>
                <button class="btn-success" onclick="location.reload()" style="margin-top: 15px;">
                    Recargar AplicaciÃ³n
                </button>
            </div>

        </div>
    </div>

</body>

</html>